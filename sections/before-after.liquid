<!-- Before & After Section -->

<!-- style -->
<style>
  .before-after-section {
    padding: 30px 0;
  }

  .section-title {
    text-align: center;
    margin-bottom: 40px;
  }

  .before-after-wrapper {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 20px;
  }

  .before-after-card {
    display: grid;
    grid-template-columns: 1fr 1fr;
    background: #f8f8f8;
    border-radius: 12px;
    overflow: hidden;

  }

  .image-box {
    position: relative;
  }

  .image-box a {
    display: block;
  }

  .image-box img {
    width: 100%;
    height: 260px;
    object-fit: cover;
    display: block;
    transition: transform 0.3s ease;
  }

  .image-box a:hover img {
    transform: scale(1.03);
  }

  .label {
    position: absolute;
    bottom: 10px;
    left: 10px;
    padding: 4px 10px;
    font-size: 12px;
    border-radius: 4px;
    color: #fff;
  }

  .label.before {
    background: #555;
  }

  .label.after {
    background: #0a7cff;
  }

  .image-box:first-child {
    border-right: 1px solid #e5e5e5;
  }

  /* Responsive */
  @media (max-width: 768px) {
    .before-after-wrapper {
      grid-template-columns: 1fr;
    }

    .before-after-card {
      grid-template-columns: 1fr;
    }
  }
</style>

<!-- content -->
<section class="before-after-section">
  <div class="page-width">
    {% if section.settings.heading != blank %}
      <h2 class="section-title">{{ section.settings.heading }}</h2>
    {% endif %}

    <div class="before-after-wrapper">
      {% for block in section.blocks %}
        {% assign product = block.settings.linked_product %}

          <div class="before-after-card" {{ block.shopify_attributes }}>
          <!-- Before Image -->
          <div class="image-box">
            {% if block.settings.before_image != blank %}
              {% if product != blank %}
                <a href="{{ product.url }}">
              {% endif %}

              <img
                src="{{ block.settings.before_image | image_url: width: 600 }}"
                alt="Before image"
                loading="lazy"
                height="auto"
                width="auto">
              <span class="label before">Before</span>

              {% if product != blank %}
                </a>
              {% endif %}
            {% endif %}
          </div>

          <!-- After Image -->
          <div class="image-box">
            {% if block.settings.after_image != blank %}
              {% if product != blank %}
                <a href="{{ product.url }}">
              {% endif %}

              <img
                src="{{ block.settings.after_image | image_url: width: 600 }}"
                alt="After image"
                loading="lazy"
                height="auto"
                width="auto">
              <span class="label after">After</span>

              {% if product != blank %}
                </a>
              {% endif %}
            {% endif %}
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
</section>

<!-- schema -->
{% schema %}
  {
    "name": "Before & After",
    "settings": [
      {
        "type": "text",
        "id": "heading",
        "label": "Section heading",
        "default": "Before & After Results"
      }
    ],
    "blocks": [
      {
        "type": "comparison",
        "name": "Comparison Block",
        "limit": 3,
        "settings": [
          {
            "type": "product",
            "id": "linked_product",
            "label": "Link to product"
          }, {
            "type": "image_picker",
            "id": "before_image",
            "label": "Before image"
          }, {
            "type": "image_picker",
            "id": "after_image",
            "label": "After image"
          }
        ]
      }
    ],
    "presets": [
      {
        "name": "Before & After",
        "blocks": [
          {
            "type": "comparison"
          }, {
            "type": "comparison"
          }, {
            "type": "comparison"
          }
        ]
      }
    ]
  }
{% endschema %}